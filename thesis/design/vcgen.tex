\subsection{VCGen with WP}
\label{subsec:vcgen_wp}

The rules for WP computation are defined by


\[
  \mathrm{WP}(\mathcal{P}, idx, Q) =
  \begin{cases}
    \mathrm{true}, & \mathcal{P}_{idx} = \mathrm{exit} \\
    \forall v . v = e_1 \oplus e_2 \implies \mathrm{WP}(\mathcal{P}, idx+1, Q)[x \leftarrow v])) , & \mathcal{P}_{idx} = x := e_1 \oplus e_2 \\
    \forall v . v = e_1 \otimes e_2 \implies \mathrm{WP}(\mathcal{P}, idx+1, Q)[x \leftarrow v])) , & \mathcal{P}_{idx} = x := e_1 \otimes e_2 \\    
    \forall v . (e_2  \neq 0 \land (v = e_1 \oslash e_2 \implies \mathrm{WP}(\mathcal{P}, idx+1, Q)[x \leftarrow v])) , & \mathcal{P}_{idx} = x := e_1 \oslash e_2 \\
    \forall v . v = e_1 ~ \mathrm{xor} ~ e_2 \implies \mathrm{WP}(\mathcal{P}, idx+1, Q)[x \leftarrow v])) , & \mathcal{P}_{idx} = x := e_1 ~ \mathrm{xor} ~ e_2 \\
    \mathrm{if} ~ e_1 = e_2 ~ \mathrm{then} ~ WP(\mathcal{P}, idx+1+off, Q) ~ \mathrm{else} ~ WP(\mathcal{P},idx+1, Q) , & \mathcal{P}_{idx} = \mathrm{if} ~ e_1 = e_2 ~ \mathrm{then} ~ \mathrm{off} \\
    \mathrm{if} ~ e_1 \neq e_2 ~ \mathrm{then} ~ WP(\mathcal{P}, idx+1+off, Q) ~ \mathrm{else} ~ WP(\mathcal{P},idx+1, Q) , & \mathcal{P}_{idx} = \mathrm{if} ~ e_1 \neq e_2 ~ \mathrm{then} ~ \mathrm{off} \\    
    \mathrm{if} ~ e_1 \geq e_2 ~ \mathrm{then} ~ WP(\mathcal{P}, idx+1+off, Q) ~ \mathrm{else} ~ WP(\mathcal{P},idx+1, Q) , & \mathcal{P}_{idx} = \mathrm{if} ~ e_1 \geq e_2 ~ \mathrm{then} ~ \mathrm{off} \\    \end{cases}
\]


% \begin{figure}[H]
%   \centering
%   \begin{tabular}{rcl}
%     WP($\mathcal{P}, idx, Q$) & $=$ & \texttt{true} \\
%     WP($x := e_1 \oslash e_2$) & $=$ & $\forall v . (e_2 \neq 0 \land  (v = e_1 \oslash e_2 \implies Q[x \leftarrow v]))$\\
%     WP($x := e$, Q) & $=$ & $\forall v . v = e \implies Q[x \leftarrow v]$\\
%     WP($s_1 ; s_2$, Q) & $=$ & WP($s_1$, WP($s_2, Q$)) \\
%     WP($\mathrm{if} ~ ep ~ \mathrm{then} ~ s_1 ~ \mathrm{else} ~ s_2$, $Q$) & $=$ & $\mathrm{if} ~ ep ~ \mathrm{then} ~ \mathrm{WP}(s_1, Q) ~ \mathrm{else} ~ \mathrm{WP}(s_2,Q)$
% \end{tabular}    
% \end{figure}







% \begin{figure}[H]
%   \centering
%   \begin{tabular}{rcl}
%     WP(\texttt{exit},Q) & $=$ & \texttt{true} \\
%     WP($x := e_1 \oslash e_2$) & $=$ & $\forall v . (e_2 \neq 0 ~\&\& ~ (v = e_1 \oslash e_2 \implies Q[x \leftarrow v]))$\\
%     WP($x := e$, Q) & $=$ & $\forall v . v = e \implies Q[x \leftarrow v]$\\
%     WP($s_1 ; s_2$, Q) & $=$ & WP($s_1$, WP($s_2, Q$)) \\
%     WP($\mathrm{if} ~ ep ~ \mathrm{then} ~ s_1 ~ \mathrm{else} ~ s_2$, $Q$) & $=$ & $\mathrm{if} ~ ep ~ \mathrm{then} ~ \mathrm{WP}(s_1, Q) ~ \mathrm{else} ~ \mathrm{WP}(s_2,Q)$
% \end{tabular}    
% \end{figure}





